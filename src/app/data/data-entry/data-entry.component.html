<div class="container my-5">
    <h1 class="dfrm-page-title text-center">CDMS Data Entry</h1>
    <form [formGroup]="activityForm">
        <app-button [label]="'test'" (click)="printActivity()"></app-button>
        <app-button [label]="'resetForm'" (click)="resetForm()"></app-button>
        <div class="row align-items-center">
            <div class="col-6 offset-3">
                <ng-select formControlName='dataset' [items]="datasets" bindLabel="name" bindValue="id" 
                [required]="true" [placeholder]="'NEW DATASETS'" (change)="datasetChange($event)">
                </ng-select>
                <ng-select formControlName='project' [items]="projects" bindLabel="name"
                    bindValue="id" [required]="true" [placeholder]="'NEW PROJECTS'">
                </ng-select>
                <input formControlName='date' [type]="'date'" class="form-control form-control-date" [required]="true"
                    [max]="today" />
            </div>
        </div>
    </form>
    <div *ngIf="columnDefs">
        <br>
        <app-button [label]="'Add Row'" (click)="addRow()"></app-button>
        <app-button [label]="'Remove Selected Rows'" (click)="removeSelectedRows()"></app-button>
        <div class="container my-5" style="height: 600px;">
            <ag-grid-angular style="width: 100%; height: 100%;" class="ag-theme-alpine" [columnDefs]="columnDefs"
                [defaultColDef]="defaultColDef" [rowData]="rowData" [rowSelection]="'multiple'"
                [suppressCellFocus]="true" (gridReady)="onGridReady($event)" [animateRows]="true">
            </ag-grid-angular>
        </div>
        <br>
        <div class="row align-items-center">
            <div class="col-3 offset-1">
                <app-button [label]="'Submit Activity'" (click)="submit()" [style]="btnStyle"
                    [disabled]="isLoading || !rowData"></app-button>
            </div>
        </div>
    </div>
</div>