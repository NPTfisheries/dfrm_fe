<div class="container">
    <h1>{{ routeType | titlecase }} List</h1>

    <button *ngIf="routeType == 'department' && managerAccess(permissionGroup)" (click)="add(routeType)"
        class="dfrm-button">Add New {{ routeType | titlecase}}</button>
    <button *ngIf="routeType == 'division' && managerAccess(permissionGroup)" (click)="add(routeType)"
        class="dfrm-button">Add New {{ routeType | titlecase}}</button>
    <button *ngIf="routeType == 'project' && professionalAccess(permissionGroup)" (click)="add(routeType)"
        class="dfrm-button">Add New {{ routeType | titlecase}}</button>
    <button *ngIf="routeType == 'users' && managerAccess(permissionGroup)" (click)="registerUser()"
        class="dfrm-button">Register User</button>
    <button *ngIf="routeType == 'image' && managerAccess(permissionGroup)" (click)="uploadImage()"
        class="dfrm-button">Upload Image</button>

    <div class="table-container">
        <table *ngIf="list" class="table table-dark table-bordered table-hover mb-0">
            <thead>
                <tr>
                    <th *ngFor="let col of columns">{{ col | titlecase}}</th>
                    <th style="text-align: center;">View</th>

                    <th *ngIf="routeType == 'department' && managerAccess(permissionGroup)" style="text-align: center;">Edit</th>
                    <th *ngIf="routeType == 'division' && managerAccess(permissionGroup)" style="text-align: center;">Edit</th>
                    <th *ngIf="routeType == 'project' && professionalAccess(permissionGroup)" style="text-align: center;">Edit</th>
                    <!-- <th *ngIf="routeType == 'subproject' && professionalAccess(permissionGroup)" style="text-align: center;">Edit</th>
                    <th *ngIf="routeType == 'task' && professionalAccess(permissionGroup)" style="text-align: center;">Edit</th>
                    <th *ngIf="routeType == 'users' && managerAccess(permissionGroup)" style="text-align: center;">Edit</th> -->
                    <th *ngIf="routeType == 'image' && managerAccess(permissionGroup)" style="text-align: center;">Edit</th>

                </tr>
            </thead>

            <tbody class="table-group-divider" *ngIf="routeType === 'department'">
                <tr *ngFor="let x of list">
                    <td>{{ x.name }}</td>
                    <td>{{ x.description }}</td>
                    <td>{{ x.manager.first_name }} {{ x.manager.last_name }}</td>
                    <td>{{ x.deputy.first_name }} {{ x.deputy.last_name }}</td>
                    <td>{{ x.assistant.first_name }} {{ x.assistant.last_name }}</td>
                    <td>
                        <ul>
                            <li *ngFor="let staffMember of x.staff">
                                {{ staffMember.first_name }} {{ staffMember.last_name}}
                            </li>
                        </ul>
                    </td>
                    <td>
                        <button class="dfrm-button btn-center" [routerLink]="x.slug"><i
                                class="fa-regular fa-eye"></i></button>
                    </td>
                    <td *ngIf="managerAccess(permissionGroup)">
                        <button class="dfrm-button-invert btn-center" (click)="edit('department', x.slug)">
                            <i class="fa-regular fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
            </tbody>

            <tbody class="table-group-divider" *ngIf="routeType === 'division'">
                <tr *ngFor="let x of list">
                    <td>{{ x.name }}</td>
                    <td>{{ x.description }}</td>
                    <td>{{ x.manager.first_name }} {{ x.manager.last_name }}</td>
                    <td>{{ x.deputy.first_name }} {{ x.deputy.last_name }}</td>
                    <td>{{ x.assistant.first_name }} {{ x.assistant.last_name }}</td>
                    <td>
                        <ul>
                            <li *ngFor="let staffMember of x.staff">
                                {{ staffMember.first_name }} {{ staffMember.last_name}}
                            </li>
                        </ul>
                    </td>
                    <td><button class="dfrm-button btn-center" [routerLink]="x.slug"><i
                                class="fa-regular fa-eye"></i></button>
                    </td>
                    <td *ngIf="managerAccess(permissionGroup)">
                        <button class="dfrm-button-invert btn-center" (click)="edit('division', x.slug)">
                            <i class="fa-regular fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
            </tbody>

            <tbody class="table-group-divider" *ngIf="routeType === 'project'">
                <tr *ngFor="let x of list">
                    <td>{{ x.name }}</td>
                    <td>{{ x.description }}</td>
                    <td>
                        <ul>
                            <li *ngFor="let pl of x.project_leader">
                                {{ pl.first_name }} {{ pl.last_name}}
                            </li>
                        </ul>
                    </td>
                    <td><button class="dfrm-button btn-center" [routerLink]="x.slug"><i
                                class="fa-regular fa-eye"></i></button>
                    </td>
                    <td *ngIf="professionalAccess(permissionGroup)">
                        <button class="dfrm-button-invert btn-center" (click)="edit('project', x.slug)"><i
                                class="fa-regular fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
            </tbody>

            <!-- <tbody class="table-group-divider" *ngIf="routeType === 'subproject'">
                <tr *ngFor="let x of list">
                    <td>{{ x.name }}</td>
                    <td>{{ x.description }}</td>
                    <td>{{ x.project }}</td>
                    <td>{{ x.lead.first_name }} {{ x.lead.last_name }}</td>
                    <td><button class="dfrm-button btn-center" [routerLink]="x.slug"><i
                                class="fa-regular fa-eye"></i></button>
                    </td>
                    <td *ngIf="professionalAccess(permissionGroup)">
                        <button class="dfrm-button-invert btn-center" (click)="edit('subproject', x.slug)">
                            <i class="fa-regular fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
            </tbody>

            <tbody class="table-group-divider" *ngIf="routeType === 'task'">
                <tr *ngFor="let x of list">
                    <td>{{ x.name }}</td>
                    <td>{{ x.description }}</td>
                    <td>{{ x.subproject }}</td>
                    <td>{{ x.supervisor.first_name }} {{ x.supervisor.last_name }}</td>
                    <td><button class="dfrm-button btn-center" [routerLink]="x.slug"><i
                                class="fa-regular fa-eye"></i></button>
                    </td>
                    <td *ngIf="professionalAccess(permissionGroup)">
                        <button class="dfrm-button-invert btn-center" (click)="edit('task', x.slug)">
                            <i class="fa-regular fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
            </tbody> -->

            <tbody *ngIf="routeType === 'users'">
                <tr *ngFor="let x of list">
                    <td>{{ x.first_name }} {{ x.last_name }}</td>
                    <td>{{ x.email }}</td>
                    <td>{{ x.profile.work_phone }}</td>
                    <td>{{ x.profile.mobile_phone }}</td>
                    <td>{{ x.profile.title }}</td>
                    <td>
                        <button class="dfrm-button btn-center" [routerLink]="x.id">
                            <i class="fa-regular fa-eye"></i>
                        </button>
                    </td>
                </tr>
            </tbody>

            <tbody *ngIf="routeType === 'image'">
                <tr *ngFor="let x of list">
                    <td>{{ x.name }}</td>
                    <td>{{ x.description }}</td>
                    <td>{{ x.photographer }}</td>
                    <td>{{ x.photo_date }}</td>
                    <td>{{ x.source }}</td>
                    <td>
                        <button class="dfrm-button btn-center" [routerLink]="x.id">
                            <i class="fa-regular fa-eye"></i>
                        </button>
                    </td>
                    <td *ngIf="managerAccess(permissionGroup)">
                        <button class="dfrm-button-invert btn-center" (click)="edit('image', x.slug)">
                            <i class="fa-regular fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
            </tbody>

        </table>
    </div>
</div>